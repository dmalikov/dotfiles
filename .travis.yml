language: c

sudo: false

os:
  - osx

before_cache:
 - rm -fv $HOME/.cabal/packages/hackage.haskell.org/build-reports.log
 - rm -fv $HOME/.cabal/packages/hackage.haskell.org/00-index*
 - rm -fv $HOME/.cabal/packages/hackage.haskell.org/01-index*
 - rm -fv $HOME/.cabal/packages/hackage.haskell.org/*.json

cache:
  directories:
  - $HOME/.stack

before_install:
 - brew update
 - brew install gpgme stack xz

install:
 - stack --no-terminal setup
 - stack --no-terminal build --only-dependencies

script:
 - stack --no-terminal build
